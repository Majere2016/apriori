#!/usr/bin/env python3# -*- coding: utf-8 -*-"""Created on 2017/4/12 下午3:39@author: zhechengma"""from apriori import aprioriimport pymysqlimport timename = "黄明端"conn=pymysql.connect(host='192.168.32.48',port=3306,user='root',passwd='123456',db='miqixin',charset='utf8')cur=conn.cursor()sql = "select c_base.corporation,c_keyperson_info.name from c_base INNER JOIN c_keyperson_info ON c_base.id=c_keyperson_info.cid WHERE c_base.corporation='{}'".format(name)print(sql)sartime = time.time ( )try:	cur.execute(sql)	personlist = cur.fetchall()	print (personlist)except Exception as ee:	print(ee)conn.close()afterfetch=time.time()b=[]for person in personlist:	b.append([person[0],person[1]])def rrelust(l):	resluts=list(apriori(l))	for i in resluts:		apor={}		apor['name']=i.ordered_statistics[0][0]		apor['name_add']=i.ordered_statistics[0][1]		apor['confidence']=i.ordered_statistics[0][2]		apor['lift']=i.ordered_statistics[0][3]		apor['support']=i.support		apor['main_names']=i.items	return aporendtime=time.time()print(rrelust(b))print(afterfetch-sartime)print(endtime-sartime)print(endtime-afterfetch)